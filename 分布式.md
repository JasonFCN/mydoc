#### 理论：

CAP理论：指的是在一个分布式系统中，[一致性](https://baike.baidu.com/item/一致性/9840083)（Consistency）、[可用性](https://baike.baidu.com/item/可用性/109628)（Availability）、[分区容错性](https://baike.baidu.com/item/分区容错性/23734073)（Partition tolerance）。三者不能同时满足。在常见的分布式系统中，P总是成立的，因此只能在一致性和可用性之间选择。

Base理论：BASE理论是Basically Available(基本可用)，Soft State（软状态）和Eventually Consistent（最终一致性）三个短语的缩写。是对CAP理论的实践过程中的一种妥协实现，采用自身业务特点，使得系统达到基本可用、最终一致性。

- 基本可用：允许可用性降低（可能响应延长、服务降级）
- 软状态：允许系统中的数据存在中间状态，并认为中间状态不影响系统整体可用性。
- 最终一致性：节点数据同步可以存在时延，但在一定的期限后必须达到数据的一致，状态变为最终状态。

一致性方案：

- 强一致性：当更新操作完成之后，任何多个后续进程的访问都会返回最新的值。它牺牲了可用性。
- 弱一致性：当更新操作成功后，不保证立即可以读到最新写入的值，也不承诺多久能够读到。这段时间称为“不一致性窗口”。
- 最终一致性：它是弱一致性的一种特例。强调系统中多个数据副本，在经过一段时间的同步之后，最终能够到达一个一致的状态。也就是说，最终一致性承诺最终会到达一致性状态。
- 因果一致性：要求有因果关系的操作顺序得到保证。
- 会话一致性：在一个会话中，执行的更新操作对自己可见。例如分布式Session的应用。

一致性机制：

- WARO（Write All Read one）：当所有的副本更新成功时，才算更新成功。例如Kafka中的ACK-all机制。
- Quorum：在更新副本时，要求只需要系统满足N个节点更新成功即可，而读操作需要读取【总节点数 - N + 1】个节点，根据版本号判断最新的数据。也即【大多数机制】。例如选举机制，主从机制等有应用。
- paxos算法：