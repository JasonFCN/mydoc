## 概述：

### 因特网

1. 硬件构成：
    	1. 端或者主机
         	1. 客户机：client
         2. 服务器：server
    2. 通信链路：同轴电缆、铜线、光纤、无线电频谱作为物理媒介。以一定的速率传输数据。当一台端系统向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节。由此形成的信息包称为分组。这些分组在目的端系统，在那里被装配成初始数据。
   3. 分组交换机：
         1. 路由器：通常用于网络层
         2. 链路层交换机：通常用于数据链路层
     4. 因特网服务提供商：由多台分组交换机和通信链路组成的网络
 3. 协议：端系统、分组交换及、其他部件之间运行着一系列协议
    1. TCP：传输控制协议
    2. IP：网际协议。定义了路由器和端系统之间发送和接受的分组格式。
    3. TCP/IP：因特网的主要协议统称为TCP/IP
4. 应用程序：
   	1. 套接字接口：规定了应用程序如何向其他程序交付数据的格式

### 网络核心

1. 分组交换

   网络应用中，端系统之间交换报文。报文可以执行一种控制功能，也可以包含数据。为了从源系统向目的系统发送一个报文，源系统将长报文划分为较小的数据块，称之为分组/包（packet）。每个分组需要通过通信链路和分组交换机传送。分组以等于该链路最大传输速率的速度传输通过通信链路。因此发送L比特的分组，链路传输速率为R比特/秒，则传输该分组的时间为：L/R 秒。

   1. 存储转发传输：指在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接收整个分组。

      因此经过N条相同速率路径的端到端的时延是：
      $$
      d_{端到端} = N\cfrac{L}{R}
      $$

   2. 排队时延和分组丢失

      分组交换机与多条链路相连。当发往某链路的分组到达该路由器时，都会先存放在输出队列中，依次发往目的地。因此产生了排队时延。如果一个队列完全充满了分组。则新的分组或已经排队的分组将会丢弃。因此产生了丢包。

   3. 转发表和路由选择协议

      每个分组的首部都包含了目的地的IP地址。路由器中有一张转发表，用于将目的地址（或者目的地址的一部分）映射成为输出链路。当分组到达路由器时，路由器先检查该地址，并根据该地址搜索转发表，以发现适当地出链路。路由器则将分组导向该出链路。

      转发表是如何设置的？通过路由转则协议，自动设置转发表。

2. 电路交换

   交换机之间连接，通过预留资源的方式进行数据传输。复用方式分为频分复用和时分复用。这种通信方式可以确保建立的连接以固定频率传输数据。但也因为静默期而不够经济。

3. 网络的网络

   端系统通过ISP接入网络，但ISP与其他ISP如何相连呢？这就需要网络的网络来实现。

   端系统通过接入ISP连接网络。接入ISP与全球ISP连接。同时不同的全球ISP之间也是相连的。但任何一个全球ISP都不可能是无处不在的。

   区域ISP：一个区域里的接入ISP与区域ISP相连。该区域ISP与类似全球ISP相连。

   PoP：在所有层次中（除了底层ISP外）一个PoP只是提供商网络中的一台或多台路由器（在相同位置）群组，其中客户ISP能够与提供商ISP连接。

   多宿：任何ISP（除第一层ISP）可以与两个或更多提供商ISP连接。解决了上层单点故障问题。

   IXP：位于相同等级结构层次的两个ISP之间的关系是对等的。对等关系通常不需要向对方付费。通过创建一个连接点将多个ISP在这里对等。

   内容提供商网络：谷歌、华为等数据中心与顶层ISP连接并向其付费。较底层ISP与之相连，直接提供服务。免去再向其他ISP付费。

### 分组交换网中的时延、丢包和吞吐量

1. 时延概述

   ​	类型：

   1. 处理时延：检查分组首部和决定将分组导向何处所需要的时间、检查比特级别的差错所需要的时间。
    	2. 排队时延：在队列中，当分组在链路上等待传输时，将产生排队时延。
    	3. 传输时延：分组到达时，只有之前的分组被传输完成后，才开始传输。此时产生传输时延。
    	4. 传播时延：物理媒介的传输速率决定传播时延。距离/速率。
     5. 端系统时延：向共享媒体（WIFI，电缆调制解调器等）传递分组的端系统中，会有意延迟传输分组。
     6. 分组化时延：voIP语音应用中，在发送方向因特网传输分组之前必须首先用编码的数字化语音填充一个分组。