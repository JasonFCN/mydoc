#### 1，java多版本切换

```shell
sudo update-alternatives --config java
export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
export JRE_HOME=${JAVA_HOME}/jre  
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib  
export PATH=${JAVA_HOME}/bin:$PATH
```

#### 2，创建快捷方式：

1）在/user/share/applications创建一个文件：xxx.desktop

```
cd /usr/share/applications
sudo gedit idea.desktop
```

2）文件中填写以下内容

```
[Desktop Entry]
Version=1.0
Type=Application
Name=Pycharm
Icon=/home/mengdan/Downloads/pycharm-2018.2.1/bin/pycharm.png
Exec=sh /home/mengdan/Downloads/pycharm-2018.2.1/bin/pycharm.sh
MimeType=application/x-py;
Name[en_US]=pycharm
```

3）通过快捷方式打开，然后锁定在桌面左侧。

#### 3，docker安装

```
# 安装
sudo apt install docker.io
# 启动
sudo systemctl start docker
# 开机启动
sudo systemctl enable docker

# 查看版本
docker -v

# 镜像搜索
docker search
# 镜像拉取
docker pull 镜像名:tag
# 镜像本地列表
docker images
# 删除镜像
docker rmi IMAGE_ID
# 运行一个容器
docker run --name container-name -d image-name
eg: docker run --name mytomcat -d tomcat     (--name:自定义名字 -d:后台运行)
# 查看运行中容器
docker ps        （-a: 查看所有）
# 停止容器
docker stop container-name/container-id
# 启动容器
docker start container-name/container-id
# 删除容器
docker rm comtainer-id
# 端口映射
-p 主机端口:容器端口
eg: docker run -d -p 6379:6379 --name myredis redis
#容器日志
docker logs container-name/container-id
```

部署ES

```shell
docker run -d --name es01 -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" elasticsearch
```

查看容器状态

```shell
docker stats
```

对ES配置环境参数（内存）

```shell
docker run -d --name es01 -p 9200:9200 -p 9300:9300 -e "discovery.tpye=single.node" -e ES_JAVA_OPTS="-Xzms64m -Xmx512m" elasticsearch
```

#### 4, openjdk卸载

要删除 OpenJDK (如果已安装的话)。首先，检查是安装的哪个 OpenJDK包。

```
# dpkg --list | grep -i jdk
```

移除 openjdk包:

```
# apt-get purge openjdk*
```

卸载 OpenJDK 相关包：

```
# apt-get purge icedtea-* openjdk-*
```

检查所有 OpenJDK包是否都已卸载完毕：

```
# dpkg --list | grep -i jdk
```

完毕。

#### 5，安装oraclejdk

下载文件：jdk-8u251-linux-x64.tar.gz

解压到目录/home/${user}/jdk

配置用户下的环境变量文件

```shell
sudo gedit ~/.bashrc
```

在文件末尾插入：

```shell
export JAVA_HOME=/home/jason/jdk/jdk-8u251-linux-x64/jdk1.8.0_251
export JRE_HOME=${JAVA_HOME}/jre  
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib  
export PATH=${JAVA_HOME}/bin:$PATH
```

保存后让环境立即生效

```shell
source ~/.bashrc
```

验证

```shell
(base) jason@jason-X6Ti:~$ java -version
java version "1.8.0_251"
Java(TM) SE Runtime Environment (build 1.8.0_251-b08)
Java HotSpot(TM) 64-Bit Server VM (build 25.251-b08, mixed mode)
```

成功

#### 6,shell终端下的快捷键：

光标移动

```js
* ctrl + <      移动到前一个单词开头
* ctrl + >      移动到后一个单词结尾
* ctrl + A      移动到开头
* ctrl + E      移动到结尾
* alt  + B      向左移动一个单词
* alt  + F      向右移动一个单词
  ctrl + B      向左移动一个字符
  ctrl + F      向右移动一个字符
  esc  + B      向左移动一个单词
  esc  + F      向右移动一个单词
  ctrl + XX     在上次光和当前光标所在字符间跳转
  esc  + T      交换光标位置前的两个单词
```

删除

```js
* ctrl + K      删除光标后所有字符(剪切)
* ctrl + U      删除光标前所有字符(剪切)
* ctrl + W      删除光标前一个单词
  ctrl + D      删除光标所在字符(光标右侧)
  ctrl + H      删除光标前字符(光标左侧)
```

撤销

```js
* ctrl + _      撤销操作
* ctrl + Y      粘贴ctrl+U/K剪切的内容
  ctrl + ?      撤消前一次输入
  alt  + R      撤消前一次动作
```

替换

```js
* ctrl + T      将光标当前字符与前面一个字符替换
```

历史命令编辑

```js
* ctrl + P      上条输入的命令(相当于上键)
* ctrl + N      上条历史命(相当于下键)
* alt  + >      上一次执行命令
* ctrl + R      输入单词搜索历史命令
```

控制命令

```js
* ctrl + L      清除屏幕
  ctrl + S      锁住终端，阻止屏幕输出
  ctrl + Q      解锁终端，允许屏幕输出
  ctrl + C      终止命令&另起一行
  ctrl + I      补全功能(类似TAB)
  ctrl + O      重复执行命令
  alt  + <数字>  操作的次数
  ctrl + Z      挂起
```

!命令

```shell
* !!            执行上条命令
* !-n           执行前n条命令
```

#### 7，git 设置用户名密码永久保存

```shell
git config --global  credential.helper store
# 再输入一次账号密码就可以保存了
```

#### 8，anaconda 设置国内源

```shell
conda config --show 	# 查看当前配置

# 清华
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge 
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/

# 中科大
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/conda-forge/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/msys2/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/bioconda/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/menpo/

conda config --set show_channel_urls yes	# 显示源信息

```

#### 9，文档处理

```java
package com.cwj.demo2;

import com.fasterxml.jackson.databind.DeserializationFeature;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.text.PDFTextStripper;
import org.apache.poi.POIXMLDocument;
import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.usermodel.Range;
import org.apache.poi.openxml4j.exceptions.OpenXML4JException;
import org.apache.poi.openxml4j.opc.OPCPackage;
import org.apache.poi.xwpf.extractor.XWPFWordExtractor;
import org.apache.xmlbeans.XmlException;

import java.io.*;
import java.text.SimpleDateFormat;
import java.util.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class TestWordread {
    public static void main(String[] args) throws IOException, OpenXML4JException, XmlException {
////        pdf2word();
//        String text = "";
//        text = readPDF();
////        System.out.println(text);
//        List<Result> results = results(text);
//        ObjectMapper mapper = new ObjectMapper();
//        mapper.setDateFormat(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"));
//        mapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);
//        String jsonStr = mapper.writeValueAsString(results);
//        System.out.println(jsonStr);
    }

    public static List<Result> results(String text) {
        List<Result> results = new ArrayList<>();
        String paragraph = "(?=知识点 |小试牛刀)([\\s\\S]+?)(?=小试牛刀|知识点 |第二部分 非选择题)";
        Pattern paragraphPattern = Pattern.compile(paragraph);
        String title = "(\\d+\\.[\\S\\s]+?（ ）[\\S\\s]+?)(?=A:)";
        Pattern titlePattern = Pattern.compile(title);
        String option = "([A-D]:\\S+?)\\s";
        Pattern optionPattern = Pattern.compile(option);
        String answer = "【答案】([A-D]+)\\s";
        Pattern answerPattern = Pattern.compile(answer);
        // 不能系统对换行的定义不同
        String reading = "【解析】[\\S \\n\\r]+?。\\r\\n";
        Pattern readingPattern = Pattern.compile(reading);
        String difficulty = "★+";
        Pattern difficultyPattern = Pattern.compile(difficulty);

        Matcher paragraphMatcher = paragraphPattern.matcher(text);
        while (paragraphMatcher.find()) {
            String s = paragraphMatcher.group(1);


            Matcher difficultyMatcher = difficultyPattern.matcher(s);
            int difficultyLevel = 0;
            if (difficultyMatcher.find()) {
                difficultyLevel = difficultyMatcher.group().length();
            }
            Matcher titleMatcher = titlePattern.matcher(s);
            Matcher optionMatcher = optionPattern.matcher(s);
            Matcher answerMatcher = answerPattern.matcher(s);
            Matcher readingMatcher = readingPattern.matcher(s);
            while (titleMatcher.find()) {
                Result result = new Result();

                // 题目
                String titleGroup = titleMatcher.group(1);
                if(titleGroup.contains("【单选题】")){
                    titleGroup.substring(titleGroup.indexOf("【单选题】")).replace("【单选题】", "");
                }
                result.setTitle(titleGroup);

                // 选项
                List<String> options = new ArrayList<>();
                for (int i = 0; i < 4; i++) {
                    if (optionMatcher.find()) {
                        String optionStr = optionMatcher.group(1).replaceAll("\r\n|\r|\n", "");
                        options.add(optionStr);
                    }
                }
                result.setOptions(options);

                // 答案
                if (answerMatcher.find()) {
                    String answerStr = answerMatcher.group(1);
                    result.setAnswer(answerStr);
                }

                // 解析
                if (readingMatcher.find()) {
                    String readingStr = readingMatcher.group();
                    result.setReading(readingStr);
                }

                // 难度
                result.setDifficulty(difficultyLevel);
                results.add(result);
            }
        }
        return results;
    }

    public static String readPDF() throws IOException {
        File file = new File("C:\\Users\\lenovo\\Desktop\\真题.pdf");
        PDDocument document = PDDocument.load(file);
        PDFTextStripper pdfTextStripper = new PDFTextStripper();
        String text = pdfTextStripper.getText(document);
        document.close();
        return text;
    }

    public static String readDocx() throws IOException, OpenXML4JException, XmlException {
        OPCPackage opcPackage = POIXMLDocument.openPackage("C:\\Users\\lenovo\\Desktop\\真题.docx");
        XWPFWordExtractor xwpfWordExtractor = new XWPFWordExtractor(opcPackage);
        String text = xwpfWordExtractor.getText();
        return text;
    }

    public static String readDoc() throws IOException, OpenXML4JException, XmlException {

        File file = new File("C:\\Users\\lenovo\\Desktop\\真题.doc");
        String str = "";
        try {
            FileInputStream fis = new FileInputStream(file);
            HWPFDocument doc = new HWPFDocument(fis);
            String doc1 = doc.getDocumentText();
            System.out.println(doc1);
            StringBuilder doc2 = doc.getText();
            System.out.println(doc2);

            Range rang = doc.getRange();
            String doc3 = rang.text();
            System.out.println(doc3);
            fis.close();
            return doc2.toString();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return str;
    }

    public static void pdf2word() {
        try {
            String pdfFile = "C:\\Users\\lenovo\\Desktop\\真题.pdf";
            PDDocument doc = PDDocument.load(new File(pdfFile));
            int pagenumber = doc.getNumberOfPages();
            pdfFile = pdfFile.substring(0, pdfFile.lastIndexOf("."));
            String fileName = pdfFile + ".doc";
            File file = new File(fileName);
            if (!file.exists()) {
                file.createNewFile();
            }
            FileOutputStream fos = new FileOutputStream(fileName);
            Writer writer = new OutputStreamWriter(fos, "UTF-8");
            PDFTextStripper stripper = new PDFTextStripper();
            stripper.setSortByPosition(true);// 排序
            stripper.setStartPage(1);// 设置转换的开始页
            stripper.setEndPage(pagenumber);// 设置转换的结束页
            stripper.writeText(doc, writer);
            writer.close();
            doc.close();
            System.out.println("pdf转换word成功！");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

class Result {
    private String title;
    private List<String> options;
    private String answer;
    private String reading;
    private Integer difficulty;

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public List<String> getOptions() {
        return options;
    }

    public void setOptions(List<String> options) {
        this.options = options;
    }

    public String getAnswer() {
        return answer;
    }

    public void setAnswer(String answer) {
        this.answer = answer;
    }

    public String getReading() {
        return reading;
    }

    public void setReading(String reading) {
        this.reading = reading;
    }

    public Integer getDifficulty() {
        return difficulty;
    }

    public void setDifficulty(Integer difficulty) {
        this.difficulty = difficulty;
    }

    @Override
    public String toString() {
        return "Result{" +
                "title='" + title + '\'' +
                ", options=" + options.toString() +
                ", answer='" + answer + '\'' +
                ", reading='" + reading + '\'' +
                ", difficulty=" + difficulty +
                '}';
    }
}
```

#### 10，SpringBoot 日期类型参数绑定，序列化

配置类型转换器：

```java
package com.cwj.config.cache;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.convert.converter.Converter;

import java.time.LocalDate;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

@Configuration
public class DateConverterConfig {
    @Bean
    public Converter<String, LocalDate> localDateConverter() {
        return new Converter<String, LocalDate>() {
            @Override
            public LocalDate convert(String source) {
                return LocalDate.parse(source, DateTimeFormatter.ofPattern("yyyy-MM-dd"));
            }
        };
    }

    @Bean
    public Converter<String, LocalDateTime> localDateTimeConverter() {
        return new Converter<String, LocalDateTime>() {
            @Override
            public LocalDateTime convert(String source) {
                return LocalDateTime.parse(source, DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));
            }
        };
    }

//    @Bean
//    public Converter<String, Date> dateConverter() {
//        return new Converter<String, Date>() {
//            @SneakyThrows
//            @Override
//            public Date convert(String source) {
//                return new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(source);
//            }
//        };
//    }
}
```

配置序列化器：

```java
package com.cwj.config.cache;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.databind.deser.std.DateDeserializers;
import com.fasterxml.jackson.databind.ser.std.DateSerializer;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer;
import com.fasterxml.jackson.datatype.jsr310.ser.LocalDateTimeSerializer;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.autoconfigure.jackson.Jackson2ObjectMapperBuilderCustomizer;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.http.converter.json.Jackson2ObjectMapperBuilder;

import java.text.SimpleDateFormat;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Date;

@Configuration
public class LocalDateTimeSerializerConfig {

    @Value("${spring.jackson.date-format:yyyy-MM-dd HH:mm:ss}")
    private String pattern;

    @Bean
    public LocalDateTimeSerializer localDateTimeSerializer() {
        return new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(pattern));
    }

    @Bean
    public DateSerializer dateSerializer() {
        return new DateSerializer(true, new SimpleDateFormat(pattern));
    }

    @Bean
    public Jackson2ObjectMapperBuilderCustomizer jackson2ObjectMapperBuilderCustomizer() {
        return builder -> builder
                .serializerByType(LocalDateTime.class, localDateTimeSerializer())
//                .serializerByType(Date.class, dateSerializer())
                ;
    }

    @Bean
    public ObjectMapper serializingObjectMapper() {
        JavaTimeModule module = new JavaTimeModule();
        LocalDateTimeDeserializer dateTimeDeserializer = new LocalDateTimeDeserializer(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));
//        MyLocalDateTimeDeserializer myLocalDateTimeDeserializer = new MyLocalDateTimeDeserializer(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));
        DateDeserializers.DateDeserializer deserializer = new DateDeserializers.DateDeserializer(DateDeserializers.DateDeserializer.instance, new SimpleDateFormat(pattern), pattern);
        module.addDeserializer(LocalDateTime.class, dateTimeDeserializer);
        module.addSerializer(LocalDateTime.class, localDateTimeSerializer());
        module.addSerializer(Date.class, DateSerializer.instance.withFormat(false, new SimpleDateFormat(pattern)));
        module.addDeserializer(Date.class, deserializer);
        return Jackson2ObjectMapperBuilder.json().modules(module)
                .featuresToDisable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS).build();
    }

//    /** 默认日期时间格式 */
//    public static final String DEFAULT_DATE_TIME_FORMAT = "yyyy-MM-dd HH:mm:ss";
//    /** 默认日期格式 */
//    public static final String DEFAULT_DATE_FORMAT = "yyyy-MM-dd";
//    /** 默认时间格式 */
//    public static final String DEFAULT_TIME_FORMAT = "HH:mm:ss";
//
//    @Bean
//    public MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter() {
//        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();
//        ObjectMapper objectMapper = new ObjectMapper();
//
//        // 忽略json字符串中不识别的属性
//        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
//        // 忽略无法转换的对象
//        objectMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
//        // PrettyPrinter 格式化输出
//        objectMapper.configure(SerializationFeature.INDENT_OUTPUT, true);
//        // NULL不参与序列化
//        objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);
//
//        // 指定时区
//        objectMapper.setTimeZone(TimeZone.getTimeZone("GMT+8:00"));
//        // 日期类型字符串处理
//        objectMapper.setDateFormat(new SimpleDateFormat(DEFAULT_DATE_TIME_FORMAT));
//
//        // java8日期日期处理
//        JavaTimeModule javaTimeModule = new JavaTimeModule();
//        javaTimeModule.addSerializer(LocalDateTime.class, new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT)));
//        javaTimeModule.addSerializer(LocalDate.class, new LocalDateSerializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT)));
//        javaTimeModule.addSerializer(LocalTime.class, new LocalTimeSerializer(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT)));
//        javaTimeModule.addDeserializer(LocalDateTime.class, new LocalDateTimeDeserializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT)));
//        javaTimeModule.addDeserializer(LocalDate.class, new LocalDateDeserializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT)));
//        javaTimeModule.addDeserializer(LocalTime.class, new LocalTimeDeserializer(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT)));
//        objectMapper.registerModule(javaTimeModule);
//
//        converter.setObjectMapper(objectMapper);
//        return converter;
//    }
}
```

11，Redis配置序列化为json格式：

```java
package com.cwj.config.cache;

import com.fasterxml.jackson.annotation.JsonAutoDetect;
import com.fasterxml.jackson.annotation.PropertyAccessor;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.cache.RedisCacheConfiguration;
import org.springframework.data.redis.cache.RedisCacheManager;
import org.springframework.data.redis.cache.RedisCacheWriter;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;
import org.springframework.data.redis.serializer.RedisSerializationContext;
import org.springframework.data.redis.serializer.StringRedisSerializer;

import java.net.UnknownHostException;

@Configuration
public class RedisConfig {

    @Bean
    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory redisConnectionFactory) throws UnknownHostException {

        Jackson2JsonRedisSerializer<Object> serializer = new Jackson2JsonRedisSerializer<Object>(Object.class);
        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);
        serializer.setObjectMapper(objectMapper);

        RedisTemplate<String, Object> redisTemplate = new RedisTemplate<>();
        redisTemplate.setConnectionFactory(redisConnectionFactory);
        redisTemplate.setKeySerializer(new StringRedisSerializer());
        redisTemplate.setValueSerializer(serializer);
        redisTemplate.setHashKeySerializer(new StringRedisSerializer());
        redisTemplate.setHashValueSerializer(serializer);
        redisTemplate.afterPropertiesSet();

        return redisTemplate;
    }

    @Bean
    public RedisCacheManager redisCacheManager(RedisTemplate redisTemplate) {
        RedisCacheWriter redisCacheWriter = RedisCacheWriter.nonLockingRedisCacheWriter(redisTemplate.getConnectionFactory());
        RedisCacheConfiguration redisCacheConfiguration = RedisCacheConfiguration.defaultCacheConfig()
                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(redisTemplate.getValueSerializer()));
        return new RedisCacheManager(redisCacheWriter, redisCacheConfiguration);
    }
}
```

11，SpringSecurity配置请求跨域：

```java
package com.cwj.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.http.HttpMethod;
import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;
import org.springframework.security.config.http.SessionCreationPolicy;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.CorsConfigurationSource;

@Configuration
@EnableWebSecurity
@EnableGlobalMethodSecurity(prePostEnabled = true)
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {


    @Override
    protected void configure(HttpSecurity httpSecurity) throws Exception {
//        httpSecurity.cors().configurationSource(corsConfigurationSource());
        httpSecurity.cors().configurationSource(corsConfigurationSource()).and().csrf().disable()
//        httpSecurity.csrf().disable()
                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.NEVER)
                .and().authorizeRequests()
                .antMatchers("/**"
                ).permitAll()
                .antMatchers(HttpMethod.OPTIONS).permitAll()
                .anyRequest().authenticated().and().logout().permitAll();

    }

    @Bean
    CorsConfigurationSource corsConfigurationSource(){
        return httpServletRequest -> {
            CorsConfiguration cfg = new CorsConfiguration();
            cfg.addAllowedHeader("*");
            cfg.addAllowedMethod("*");
            cfg.addAllowedOrigin("*");
            cfg.setAllowCredentials(true);
            cfg.checkOrigin("*");
            return cfg;
        };
    }
}
```